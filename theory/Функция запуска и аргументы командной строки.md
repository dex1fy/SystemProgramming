## Функция запуска приложений. Разновидности функции запуска. Аргументы командной строки

Отлично, готовимся к экзамену. Коротко, четко, на пальцах.

---

### **1. Функция запуска в Си — `main()`**

Это **точка входа**, которую ищет и вызывает операционная система, когда запускает твою программу.

**Важные факты:**
*   На самом деле ОС вызывает не `main` напрямую, а небольшой стартовый код, который уже потом вызывает `main`.
*   `main` — это **интерфейс** между твоей программой и ОС.

---

### **2. Разновидности `main` (как объявить)**

Экзаменационные варианты (знай все три):

1.  **`int main(void)`**
    *   **Самая простая.** Программа **не принимает аргументы** из командной строки.
    *   Пример: программа, которая просто печатает "Hello World".

2.  **`int main(int argc, char *argv[])`**
    *   **Стандартная и самая частая.** Программа **работает с аргументами командной строки**.
    *   **Что такое:**
        *   `argc` (argument count) — **сколько** аргументов передали.
        *   `argv` (argument vector) — **массив строк** (сами аргументы).

3.  **`int main(int argc, char *argv[], char *envp[])`**
    *   **Расширенная.** Помимо аргументов, получает сразу **переменные окружения** (envp).
    *   **На экзамене скажи:** "Это не по стандарту, но многие компиляторы поддерживают. Стандартный способ получить окружение — через глобальную переменную `extern char **environ`".

---

### **3. Аргументы командной строки (`argc` и `argv`) — КАК ЭТО РАБОТАЕТ**

**Представь:** Ты вводишь в консоли:
```bash
./myprogram file.txt -v
```

**Что будет внутри программы:**

```
argc = 3  // Всего три "слова": сама программа, file.txt, -v

argv[0] -> "./myprogram"  // ВСЕГДА имя программы
argv[1] -> "file.txt"     // Первый аргумент
argv[2] -> "-v"          // Второй аргумент
argv[3] = NULL           // Конец массива (охранный NULL)
```

**Золотые правила (запомнить для экзамена):**

1.  **`argc` всегда >= 1** (потому что argv[0] — это имя программы).
2.  **`argv[0]`** — это **не всегда то, что ты написал**. Это имя, под которым программа была вызвана. Может быть полным путем.
3.  **`argv[argc]` ВСЕГДА равен `NULL`** — это маркер конца массива.
4.  Аргументы **приходят как массив строк** (массив указателей на `char`). Пробелы в командной строке — это разделители.

---

### **4. Простой пример для понимания (запомни эту структуру)**

```c
#include <stdio.h>

int main(int argc, char *argv[]) {
    printf("Всего аргументов (включая имя программы): %d\n", argc);
    
    // Печатаем все аргументы
    for (int i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }
    
    // Или так (пока не встретим NULL)
    for (int i = 0; argv[i] != NULL; i++) {
        printf("Аргумент %d: %s\n", i, argv[i]);
    }
    
    return 0;
}
```

**Если запустить:** `./program hello world`
**Напечатает:**
```
Всего аргументов: 3
argv[0] = ./program
argv[1] = hello
argv[2] = world
```

---


*   **`main`** — функция запуска, вызывается ОС.
*   **`argc`** — количество аргументов (минимум 1).
*   **`argv[0]`** — имя программы.
*   **`argv[1]...`** — то, что пользователь ввел после имени.
*   **Последний элемент `argv`** — всегда `NULL`.
*   **Три формы:** `void`, `(argc, argv)`, `(argc, argv, envp)`.

**Частый вопрос:** "Что будет, если вызвать программу без аргументов?"  
**Ответ:** `argc = 1`, `argv[0]` = имя программы, `argv[1] = NULL`.
