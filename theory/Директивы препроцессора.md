## Предназначение и особенности использования директив препроцессора и заголовочных файлов.
**Директивы препроцессора и заголовочные файлы — это "инструкции по сборке" программы.**

---

### **Заголовочные файлы (.h) — "оглавления книг"**

**Предназначение:**
1. **Объявление "что есть"** без указания "как работает"
2. **Договорённость между файлами** о том, какие функции и структуры доступны
3. **Повторное использование кода** в разных местах

**Простой пример:**
```c
// math_functions.h — ЗАГОЛОВОЧНЫЙ файл (только ОБЪЯВЛЕНИЯ)
#ifndef MATH_FUNCTIONS_H  // Защита от повторного включения
#define MATH_FUNCTIONS_H

// Говорим: "Где-то есть такая функция"
int add(int a, int b); // ОБЪЯВЛЕНИЕ (declaration)

#endif
```

```c
// math_functions.c — ИСХОДНЫЙ файл (РЕАЛИЗАЦИЯ)
#include "math_functions.h"

// А вот КАК она работает:
int add(int a, int b) { // ОПРЕДЕЛЕНИЕ (definition)
    return a + b;
}
```

```c
// main.c — ГЛАВНЫЙ файл
#include "math_functions.h" // Подключаем объявление

int main() {
    int result = add(5, 3); // Компилятор знает про add() из .h файла
    return 0;
}
```

---

### **Директивы препроцессора — "умный копировальщик текста"**

Препроцессор работает **до компиляции**, просто обрабатывая текст.

#### **Основные директивы:**

**1. `#include` — "вставь сюда текст из другого файла"**
```c
#include <stdio.h>   // Из системных папок
#include "myfile.h"  // Из текущей папки
```
**Что делает:** Берет файл `stdio.h` и копирует его содержимое на место `#include`.

**2. `#define` — "замени одно слово на другое"**
```c
#define PI 3.14159
#define MAX_SIZE 100
#define PRINT(msg) printf("%s\n", msg)

// Препроцессор заменит:
float area = PI * r * r;  // Станет: float area = 3.14159 * r * r;
PRINT("Hello");          // Станет: printf("%s\n", "Hello");
```

**Главные правила коротко и понятно:**

---

### **Для заголовочных файлов (.h):**

1. **Только списки, не рецепты**  
   В `.h` пиши *что* есть (объявления), в `.c` пиши *как* работает (код).

2. **Защищайся от дублей**  
   Всегда начинай `.h` файл с `#ifndef`/`#define` или `#pragma once`.

3. **Не создавай глобальных в `.h`**  
   `int x = 5;` в `.h` → ошибка. Используй `extern int x;` в `.h` и `int x = 5;` в одном `.c`.

---

### **Для директив препроцессора:**

4. **Макросы = скобки везде**  
   `#define SUM(a,b) ((a) + (b))` — скобки вокруг ВСЕГО и вокруг КАЖДОГО аргумента.

5. **Условная компиляция — твой друг**  
   `#ifdef DEBUG` — включай/выключай отладочный код, код для разных ОС.

6. **Порядок включения: система → своё**  
   Сначала `<stdio.h>`, потом `"myfile.h"`.

---

### **Практические "нельзя":**

7. **Не делай циклических зависимостей**  
   Если `a.h` включает `b.h`, то `b.h` НЕ должен включать `a.h`.

8. **Не тащи в `.h` лишние включения**  
   Если в `.h` не используется `stdio.h` — не включай его.

9. **Не забывай, что `#include` = копипаст**  
   Всё из включаемого файла вставится на это место.

---

### **Самое главное одним предложением:**

**Заголовки (.h) говорят *"что можно использовать"*, директивы (#) *подготавливают текст* перед компиляцией, и всё это нужно делать аккуратно, чтобы не сломать сборку.**
