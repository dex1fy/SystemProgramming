## Особенности разработки программ с использованием API информационной системы (основные отличия от программ, не использующих API)

Программа с API — как телефонный звонок в кол-центр, а без API — как разговор с самим собой в пустой комнате.

---

### **Чем программа с API отличается от обычной**

**Обычная программа (без API):**
- Работает сама по себе
- Все данные внутри неё или на вашем компьютере
- Скорость зависит только от вашего ПК
- Вы контролируете всё

**Программа с API:**
- Работает **как посредник** — постоянно звонит "куда-то"
- Данные хранятся **на чужом сервере** далеко в интернете
- Зависит от интернета и чужого сервиса
- Вы управляете только своей частью

---

### **Главные отличия по пунктам**

**1. Работа с ошибками — 50% кода**
Если обычная программа может сломаться только из-за своих ошибок, то программа с API ломается постоянно:
- Пропал интернет
- Удалённый сервер упал
- Сервер ответил "слишком много запросов, подожди час"
- Формат ответа изменился без предупреждения

**Что делать:** Писать много проверок: "а если нет ответа?", "а если ответ странный?", "а если надо подождать?"

**2. Ожидание ответа**
Обычная функция выполняется мгновенно. Запрос к API может идти **секунды или минуты**.

**Пример:**
```python
# Обычная программа
результат = посчитать_сумму(5, 3)  # мгновенно

# Программа с API
результат = запросить_погоду_из_интернета()  # ждём... 2... 5... 10 секунд...
```
Интерфейс не должен висеть в это время.

**3. Ключи и доступ**
Чтобы получить данные, нужно каждый раз "предъявлять пропуск" — **API-ключ или токен**. Его нужно:
- Где-то хранить (но не в открытом виде)
- Обновлять, если истёк срок
- Не показывать посторонним

**4. Лимиты**
У большинства API есть лимиты: "не больше 1000 запросов в день". Нужно считать свои запросы и не превышать.

**5. Чужой формат данных**
Данные приходят в **JSON** — как текст со структурами `{"поле": "значение"}`. Нужно этот текст разбирать и проверять, что все нужные поля есть.

---

### **Что появляется в коде с API**

1. **Функции для работы с сетью** — вместо чтения файла с диска
2. **Обработчики ошибок** на каждый чих: нет сети, сервер молчит, данные битые
3. **Таймауты** — "если нет ответа 30 секунд, прекращай ждать"
4. **Повторные попытки** — "если не получилось, попробуй ещё 2 раза через 5 секунд"
5. **Кэширование** — "сохрани ответ, чтобы не спрашивать снова"
6. **Логирование** — запись всех запросов и ответов для отладки

---

### **Простая аналогия**

**Без API:** Вы готовите ужин дома. Все продукты в холодильнике. Скорость зависит от вас.

**С API:** Вы заказываете ужин через доставку. Зависите:
- От работы ресторана (готовят ли?)
- От курьера (проедет ли?)
- От погоды (не отменит ли?)
- От приложения (не зависнет ли?)

Вы не контролируете процесс, только делаете заказ и ждёте.

---

### **Итог одним предложением**

**Программа с API — это программа, которая постоянно должна договариваться с внешним миром и готова к тому, что мир может не ответить, ответить неправильно или ответить не сразу.**