## Анонимные каналы (в Windows и Linux). Назначение и использование.

**Анонимные каналы — это "труба" между двумя программами.**

---

### **Что это:**

**Воображаемая труба**, по которой одна программа может передать данные другой, без создания файла.

```
Программа А → [труба] → Программа Б
```

---

### **Зачем нужны:**

1. **Командная строка: `ls | grep txt`**
   - `ls` пишет в трубу список файлов
   - `grep` читает из трубы и ищет `.txt`

2. **Общение родитель↔ребёнок программ**
3. **Передать результат одной программы другой**

---

### **Как создаётся в Linux:**
```c
int труба[2];
pipe(труба);  // Создал трубу

// труба[0] — конец для чтения (откуда брать данные)
// труба[1] — конец для записи (куда класть данные)
```

### **Как создаётся в Windows:**
```c
HANDLE читать, писать;
CreatePipe(&читать, &писать, ...);
```

---

### **Простой пример (Linux):**
```c
#include <unistd.h>
#include <stdio.h>

int main() {
    int труба[2];
    pipe(труба);  // Создали трубу
    
    if (fork() == 0) { // Ребёнок
        char сообщение[100];
        read(труба[0], сообщение, 100);  // Читаем из трубы
        printf("Получил: %s\n", сообщение);
    } else { // Родитель
        write(труба[1], "Привет!", 8);  // Пишем в трубу
    }
    
    return 0;
}
```

**Что происходит:**
1. Родитель пишет `"Привет!"` в трубу
2. Ребёнок читает из трубы
3. Ребёнок печатает `"Получил: Привет!"`

---

### **Главные особенности:**

1. **Только для родственных программ** (которые созданы одна из другой)
2. **Данные идут в одну сторону** (как настоящая труба)
3. **Нет файла на диске** — всё в памяти
4. **Автоматически исчезает** когда программы завершаются

---

### **Пример из жизни: конвейер команд**

Когда вы пишете в терминале:
```bash
cat file.txt | sort | uniq
```
**Создаются две трубы:**
```
cat → [труба1] → sort → [труба2] → uniq
```

---

### **Когда использовать:**

✅ **Да:** 
- `программа1 | программа2` в командной строке
- Родительская программа передаёт данные дочерней
- Небольшие объёмы данных

❌ **Нет:**
- Большие файлы (лучше реальный файл)
- Общение несвязанных программ
- Нужен доступ с двух сторон

---

### **Важно запомнить:**

1. **Труба = два конца:** один пишет, другой читает
2. **Анонимная = без имени**, только для своих программ
3. **Основа конвейеров** (`|`) в командной строке
4. **Быстрее файлов** — всё в памяти

**Проще:** Это как два человека в разных комнатах передают записки через дырку в стене, а не через окно (файл). Быстро, приватно, но только между этими комнатами.