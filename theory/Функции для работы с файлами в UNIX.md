## Функции для работы с файлами в UNIX-подобных операционных системах.
**Функции для работы с файлами в UNIX/Linux — ключевое для экзамена**

---

### **1. Низкоуровневые системные вызовы (обязательно знать)**

#### **`open()` — открыть/создать файл**
```c
int fd = open("file.txt", O_RDONLY);  // Только чтение
int fd = open("file.txt", O_WRONLY | O_CREAT, 0644); // Создать для записи
```
**Флаги:** `O_RDONLY`, `O_WRONLY`, `O_RDWR`, `O_CREAT`, `O_TRUNC`, `O_APPEND`  
**Возвращает:** файловый дескриптор (int) или -1 при ошибке

#### **`read()` — прочитать**
```c
char buffer[100];
ssize_t bytes = read(fd, buffer, sizeof(buffer));
```
**Возвращает:** количество прочитанных байт, 0 если конец файла, -1 при ошибке

#### **`write()` — записать**
```c
ssize_t bytes = write(fd, "text", 4);
```

#### **`close()` — закрыть**
```c
close(fd);  // ОБЯЗАТЕЛЬНО!
```

#### **`lseek()` — переместиться**
```c
lseek(fd, 0, SEEK_SET);   // В начало
lseek(fd, 100, SEEK_CUR); // На 100 байт вперёд
```

---

### **2. Файловые дескрипторы (важно!)**
- `0` — stdin (стандартный ввод)
- `1` — stdout (стандартный вывод)  
- `2` — stderr (стандартный вывод ошибок)
- `3`, `4`, `5`... — пользовательские файлы

```c
write(1, "Hello\n", 6);  // Вывод в консоль
write(2, "Error\n", 6);  // Вывод ошибки
```

---

### **3. Стандартные функции stdio.h (обёртки)**
```c
FILE* f = fopen("file.txt", "r");  // Открыть
fgets(buffer, size, f);           // Читать строку
fprintf(f, "text");               // Записать форматированно
fclose(f);                        // Закрыть
```

---


1. **Чем отличаются `open()` и `fopen()`?**
   - `open()` — системный вызов, возвращает int (дескриптор)
   - `fopen()` — функция stdio, возвращает FILE* (указатель на структуру с буфером)

2. **Что такое файловый дескриптор?**
   - Целое число, представляющее открытый файл
   - У каждого процесса своя таблица дескрипторов

3. **Как проверить ошибку при open/read/write?**
   - Функции возвращают -1
   - Код ошибки в глобальной переменной `errno`
   - `perror("msg")` выводит ошибку

4. **Что делает O_CREAT? O_TRUNC? O_APPEND?**
   - `O_CREAT` — создать если не существует
   - `O_TRUNC` — обрезать до нуля если существует
   - `O_APPEND` — добавлять в конец файла

5. **Как перенаправить вывод программы в файл?**
   - Использовать `dup2()`: `dup2(file_fd, 1);`

---