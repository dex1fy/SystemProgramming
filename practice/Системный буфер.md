# Программа для записи и считывание строки с использованием системного буфера.

Шаг 1. Написать в main.c следующий код.

``` C

#define _CRT_SECURE_NO_WANINGS
#include <stdio.h>
#include <Windows.h>

void Set(LPWSTR str) {
	int len = wcslen(str + 1) * sizeof(LPWSTR); // выделяем память под длину строки
	HANDLE h = GlobalAlloc(0, len); // Выделяем память в глобальной куче (GMEM_FIXED = 0)
	memcpy(GlobalLock(h), str, len); // Блокируем память для получения указателя и копируем строку
	GlobalUnlock(h); // Разблокируем память
	OpenClipboard(0); // Открываем буфер обмена для текущего потока (0 = NULL) 
	EmptyClipboard();  // Очищаем текущее содержимое буфера обмена
	SetClipboardData(CF_UNICODETEXT, h); // Устанавливаем данные в буфер обмена в формате Unicode текста
	CloseClipboard(); // Закрываем буфер обмена
}

int Get() {
	OpenClipboard(0); // Открываем буфер обмена
	MessageBox(0, GetClipboardData(CF_UNICODETEXT), L"title", 0); // выводим в messagebox
	CloseClipboard(); // Закрываем буфер обмена
}

int main() {
	Set(L"GG"); // устанавливаем значение 
	Get(); // получаем значение
}

```