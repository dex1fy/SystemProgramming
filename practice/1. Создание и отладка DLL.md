## Создание и отладка библиотеки DLL. Для демонстрации работы написать две элементарные функции в библиотеке и вызвать их из основной программы

Шаг 1. Код в файле main.c (консольное приложение)

``` C
#include <Windows.h>  // Нужно для LoadLibrary, GetProcAddress
#include <stdio.h>    // Для printf
#define PATH L"DllProject.dll"  // Путь к файлу библиотеки

typedef int(*Fun)(int, int);  // Создаём "шаблон" для функций из DLL
                               // Это указатель на функцию, которая принимает
                               // два int и возвращает int

int main() {
    HINSTANCE dll;  // Дескриптор (номерок, ссылка на загруженную DLL)

    // 1. ЗАГРУЗКА БИБЛИОТЕКИ
    // LoadLibrary — как "взять книгу с полки"
    if ((dll = LoadLibrary(PATH)) == NULL) return 1;
    // Если библиотеки нет -> выходим с ошибкой

    // 2. ПОИСК ФУНКЦИЙ В БИБЛИОТЕКЕ
    // GetProcAddress — как "найти нужную главу в книге"
    Fun Sum = GetProcAddress(dll, "Sum");    // Ищем функцию "Sum"
    Fun Diff = GetProcAddress(dll, "Diff");  // Ищем функцию "Diff"
    // Теперь Sum и Diff — это указатели на функции из DLL

    // 3. ИСПОЛЬЗОВАНИЕ ФУНКЦИЙ
    // Вызываем как обычные функции!
    printf("2 + 1 = %d\n", Sum(2, 1));    // Напечатает: 3
    printf("2 - 1 = %d\n", Diff(2, 1));   // Напечатает: 1

    // 4. ВЫГРУЗКА БИБЛИОТЕКИ
    // FreeLibrary — как "вернуть книгу на полку"
    FreeLibrary(dll);

    return 0;
}
```

Шаг 2. Код в файле DllCode.c в проекте одного решения DllProject.  
``` C
#include <Windows.h>

// ТОЧКА ВХОДА В DLL — как main() для библиотеки
// Вызывается при загрузке/выгрузке DLL
BOOL WINAPI DllMain() {
    return TRUE;  // "Всё ок, библиотека готова к работе"
}

// __declspec(dllexport) — ВАЖНО!
// Это как "наклейка ЭКСПОРТ" на функцию
// Без неё функция будет скрыта внутри DLL
__declspec(dllexport) int Sum(int a, int b);

// Реализация функции
int Sum(int a, int b) {
    return a + b;
}

// То же самое для второй функции
__declspec(dllexport) int Diff(int a, int b);

int Diff(int a, int b) {
    return a - b;
}

```

Шаг 3. Укажем проекту с dll то, что он должен компилировать под dll. 

**Свойства -> общие -> тип конфигурации**

Шаг 4. Скомпилируем dll и запустим главный проект.<br>
**Отладка -> запустить**